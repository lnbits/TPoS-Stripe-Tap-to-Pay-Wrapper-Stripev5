<p align="center">

  <h1>TPoS-Stripe Tap-to-Pay Wrapper Stripe v5</h1>

  <a href="https://opensats.org">
    <img alt="OpenSats Supported" src="https://img.shields.io/badge/OpenSats-Supported-orange?logo=bitcoin&logoColor=white">
  </a>
  <a href="./LICENSE">
    <img alt="MIT" src="https://img.shields.io/badge/License-MIT-success?logo=open-source-initiative&logoColor=white">
  </a>
  <a href="https://github.com/lnbits">
    <img alt="Built for LNbits" src="https://img.shields.io/badge/Built%20for-LNbits-4D4DFF?logo=lightning&logoColor=white">
  </a>
  <a href="https://github.com/lnbits/TPoS-Stripe-Tap-to-Pay-Wrapper/releases/download/v0.0.1/app-release.apk">
    <img alt="Download APK" src="https://img.shields.io/badge/Download-APK-blue?logo=android&logoColor=white">
  </a>

 <br><br>
  <strong>One checkout. Two rails.</strong><br>
  A seamless integration for handling both fiat and Lightning payments within the LNbits ecosystem. This extension allows merchants to accept traditional card payments via Stripe's Tap-to-Pay functionality alongside instant Lightning Network transactions, providing a unified payment experience.

</p>



## Posts

<a href="https://www.youtube.com/watch?v=8w4-VQ3WFrk"> <img src="https://github.com/user-attachments/assets/edb0059b-e950-44c7-ac86-4aeac979b18b" width="400"></a>

<a href="https://nostr.com/nevent1qqs2wuwfryhwjmzg64tkvh907x74r979wak8xr53mkhkwtphy648r2gpzamhxue69uhhyetvv9ujumn0wd68ytnzv9hxgtczyrqlcam37hayrr7n43yjyxsc7xd59n9h5e3a4rcyewlkczxgp5stzqcyqqqqqqgwkkndq">https://nostr.com/nevent1qqs2wuwfryhwjmzg64tkvh907x74r979wak8xr53mkhkwtphy648r2gpzamhxue69uhhyetvv9ujumn0wd68ytnzv9hxgtczyrqlcam37hayrr7n43yjyxsc7xd59n9h5e3a4rcyewlkczxgp5stzqcyqqqqqqgwkkndq</a>

<a href="https://x.com/lnbits/status/1974218832077054315">https://x.com/lnbits/status/1974218832077054315</a>

> Please like/share/subscribe, it's the easiest way to contribute and help get these tools out there.

## Getting Started

Follow these steps for a clean installation of the LNbits Stripe Setup.

### Requirements

- LNbits instance version `v1.3` or later  
- Verified Stripe account  
- Android device with NFC support  
- Stable internet connection  

### Device Compatibility And Security Notes

- This wrapper depends on the Stripe Terminal Tap to Pay SDK and only works on Android devices that meet Stripe's current hardware/OS compatibility requirements.
- A low-cost device can work if it is eligible. Example tested device: **Samsung Galaxy A16**.
- Devices must **not be rooted**.
- For production Tap to Pay use, keep **Developer Options disabled**.
- Enable Developer Options/USB debugging only temporarily when doing local ADB installs for development.



## Installation

1. **Configure LNbits Fiat Provider**  
   In your LNbits instance, go to **Settings ‚Üí Fiat Provider** and add your Stripe Secret Key and Webhook URL.  
   Ensure the key has permissions for `checkout` and `payment_intents`.

2. **Install the Wrapper TPoS Stripe App (Android)**  
   Download and install the latest [TPoS-Stripe Wrapper APK](https://github.com/lnbits/TPoS-Stripe-Tap-to-Pay-Wrapper/releases/latest).  
   <p align="left">
     <a href="https://github.com/lnbits/TPoS-Stripe-Tap-to-Pay-Wrapper/releases/download/v0.0.1/app-release.apk">
       <img alt="Download APK" src="https://img.shields.io/badge/Download-APK-blue?logo=android&logoColor=white">
     </a>
   </p>

3. **Create a Stripe Terminal Location**  
   In your Stripe Dashboard create a terminal location for your device.  
   <p align="left">
     <img width="360" alt="Stripe Location Setup" src="https://github.com/user-attachments/assets/0b3301d7-9ad5-4101-96ec-e899e2de28e8">
   </p>

4. **Create an LNbits ACL Token**  
   In LNbits, go to your wallet‚Äôs **Access & Control List** and create a new ACL Token with the permission `fiat`.  
   <p align="left">
     <img width="360" alt="LNbits ACL Token" src="https://github.com/user-attachments/assets/ff07350e-8a3f-498e-aaef-40776442a9aa">
   </p>

5. **Link TPoS Record to Stripe**  
   In your LNbits TPoS extension, click the **QR icon** for your PoS record and add:  
   - Stripe Terminal Location ID  
   - ACL Token  
   <p align="left">
     <img width="360" alt="TPoS QR Setup" src="https://github.com/user-attachments/assets/966fec79-37a0-49da-bc9d-4458af275dda">
   </p>

6. **Pair the Android App**  
   Open the TPoS Wrapper app and scan the QR code generated by your LNbits TPoS record.  
   Your device is now ready to accept both Tap-to-Pay and Lightning payments.

## Debug Build + Install (ADB)

Use this if you want to build and install a debug APK locally.

### Prerequisites

- Temporarily enable Developer Options + USB debugging on your Android device (for local install only).
- Install JDK 17 and Android SDK command-line tools.

### Linux (Ubuntu) quick setup

```bash
sudo apt update
sudo apt install openjdk-17-jdk
```

Install Android command-line tools and platform packages:

```bash
mkdir -p ~/Android/Sdk/cmdline-tools
cd /tmp
curl -o cmdline-tools.zip https://dl.google.com/android/repository/commandlinetools-linux-11076708_latest.zip
unzip -q cmdline-tools.zip -d ~/Android/Sdk/cmdline-tools
mv ~/Android/Sdk/cmdline-tools/cmdline-tools ~/Android/Sdk/cmdline-tools/latest
~/Android/Sdk/cmdline-tools/latest/bin/sdkmanager "platforms;android-36" "build-tools;35.0.0" "platform-tools"
~/Android/Sdk/cmdline-tools/latest/bin/sdkmanager --licenses
printf "sdk.dir=%s\n" "$HOME/Android/Sdk" > local.properties
```

### Build + install (debug)

```bash
./gradlew :app:assembleDebug
adb devices
adb install -r app/build/outputs/apk/debug/app-debug.apk
```

### Build + install (staging, non-debuggable)

Use this for real Tap-to-Pay while keeping build times close to debug.

```bash
./gradlew :app:assembleStaging
adb devices
adb install -r app/build/outputs/apk/staging/app-staging.apk
```



## Usage

- Create products in LNbits [TPoS Extension](https://github.com/lnbits/tpos/blob/main/README.md) and assign both Lightning and Stripe payment options.  
- Generate invoices payable with either Bitcoin Lightning or Stripe Tap-to-Pay.  
- Monitor transactions in one unified LNbits dashboard.



## Contributing

We welcome contributions to the LNbits Stripe Extension!



1. Fork the repository.  
2. Create a new branch: `git checkout -b feature/your-feature-name`  
3. Make your changes.  
4. Commit: `git commit -m 'feat: Add new feature X'`  
5. Push: `git push origin feature/your-feature-name`  
6. Open a Pull Request.

Please ensure your code adheres to the project's coding standards.

<div align="center">

### üõçÔ∏è Powered by LNbits

LNbits empowers developers and merchants with modular, open-source tools for building Bitcoin-based systems ‚Äî fast, free, and extendable.

<p>
  <a href="https://shop.lnbits.com/" target="_blank">
    <img src="https://img.shields.io/badge/Visit-LNbits%20Shop-7C3AED?logo=shopping&logoColor=white&labelColor=5B21B6" alt="LNbits Shop">
  </a>
  <a href="https://my.lnbits.com/login" target="_blank">
    <img src="https://img.shields.io/badge/Try-myLNbits%20SaaS-2563EB?logo=lightning&logoColor=white&labelColor=1E40AF" alt="myLNbits SaaS">
  </a>
  <a href="https://news.lnbits.com/" target="_blank">
    <img src="https://img.shields.io/badge/Read-LNbits%20News-F97316?logo=rss&logoColor=white&labelColor=C2410C" alt="LNbits News">
  </a>
  <a href="https://extensions.lnbits.com/" target="_blank" style="margin: 0 10px;">
  <img
    src="https://img.shields.io/badge/Explore-LNbits%20Extensions-10B981?logo=puzzle-piece&logoColor=white&labelColor=065F46" alt="LNbits Extensions">
  </a>
</p>
</div>

<hr style="margin: 28px 0; border: 0; border-top: 1px solid #e5e7eb;" />
